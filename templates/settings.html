<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Instellingen</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/gh/chatgptpython/embed@2b5d434/sdk.js"></script>
    <!-- Pickr CSS -->
    <link href="https://cdn.jsdelivr.net/npm/@simonwep/pickr@1.8.1/dist/themes/classic.min.css" rel="stylesheet">





  <style>
    /* Custom styling */
    body, .card {
      font-family: 'Arial', sans-serif;
      background-color: #f8f9fa;
      color: #343a40;
      
    }

    .card {
  margin-bottom: 15px !important;  /* Voeg !important toe om zeker te zijn dat deze regel wordt toegepast */
}

/* ... (rest van je bestaande CSS) ... */


    .sidebar {
      background: linear-gradient(to bottom, #003366, #336699); /* Gradient Blue */
      color: #ffffff;
      position: fixed;
      top: 0;
      left: -250px;
      height: 100vh;
      width: 250px;
      overflow-y: auto;
      transition: all 0.3s;
      z-index: 1000;
    }

    .sidebar.show {
      left: 0;
    }

    

    .toggle-btn, .close-btn {
      color: #ffffff;  /* White Color */
      font-size: 24px;
      margin: 15px;
      cursor: pointer;
      z-index: 1001;
      transition: color 0.3s ease;
    }

    .nav-link.active, .btn {
      background-color: #3a66c4;  /* Dark Blue */
      color: white;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }

.nav-link.active, .btn {
  background: linear-gradient(90deg, #1e3c72 0%, #1e3c72 50%, #2a5298 100%);  /* Spacey Blue */
  color: white;
  border-radius: 5px;
  transition: background-color 0.3s ease;
}

    /* Top Bar with spacey effect */
    .top-bar {
      background: radial-gradient(circle, rgba(2,0,36,1) 0%, rgba(9,9,121,1) 36%, rgba(0,212,255,1) 100%);
    }

    /* White hamburger menu */
    .toggle-btn i {
      color: white !important;
    }

    @media (min-width: 992px) {
      .sidebar {
        left: 0;
      }
      .container {
        margin-left: 260px;
      }
      .toggle-btn {
        display: none;
      }
      .top-bar {
        display: none !important;
      }
    }

    .custom-title {
  font-family: 'Georgia', serif;
  font-weight: bold;
  
}

.custom-card-header .card-header {
  font-family: 'Georgia', serif;
  font-weight: bold;
  
  
}

.form-with-button-end {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }


  </style>
</head>
<body>

<!-- Header with Dashboard label and Toggle Button -->
<div class="d-flex justify-content-between align-items-center bg-dark text-white p-3 top-bar">
    <h1><i class="fas fa-robot"></i>&nbsp;&nbsp;&nbsp;Dashboard</h1>
    <div class="toggle-btn" id="toggleSidebar">
      <i class="fas fa-bars"></i>
    </div>
  </div>
  


<!-- Sidebar -->
<div class="sidebar p-3" id="sidebarMenu">
    <!-- Close Button (only visible on small screens) -->
    <div class="d-flex justify-content-end d-lg-none"> <!-- d-lg-none makes it hidden on large screens -->
      <button class="btn btn-danger" id="closeSidebar">Sluiten</button>
    </div>
    <h2><i class="fas fa-robot"></i> Chatbot Dashboard</h2>
    <ul class="nav flex-column">
      <li class="nav-item">
        <a class="nav-link active" href="#"><i class="fas fa-cogs"></i> Chatbot Instellingen</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/"><i class="fas fa-history"></i> Geschiedenis</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/data"><i class="fas fa-plus-square"></i> Info Toevoegen</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#"><i class="fas fa-question-circle"></i> Help</a>
      </li>
    </ul>
</div>

  

<!-- Main Content -->
<div class="container mt-5">
    <h1 class="custom-title"><i class="fas fa-tools"></i> Chatbot Instellingen</h1>
 <!-- Card for Title -->

<div class="card mb-4 shadow custom-card-header">
    <div class="card-header">  <strong>Titel van de Chatbot</strong></div>
    <div class="card-body">
      <form id="update-form-title" class="form-with-button-end">
        <input type="text" id="new-title" name="new-title" class="form-control" placeholder="Typ hier je titel..">
        <button type="submit" class="btn">Bijwerken</button>
      </form>
    </div>
  </div>
  

<!-- Card for Welcome Message -->
<div class="card mb-4 custom-card-header">
  <div class="card-header"><i class="fas fa-comment-dots"></i> - <strong>Welkomstbericht van de Chatbot</strong></div>
  <div class="card-body">
    <form id="update-form-welcome" class="form-with-button-end">
      <input type="text" id="new-message" name="new-message" class="form-control" placeholder="Typ hier je welkomstbericht..">
      <button type="submit" class="btn">Bijwerken</button>
    </form>
  </div>
</div>

<div class="card mb-4 custom-card-header">
    <div class="card-header"><i class="fas fa-palette"></i> - <strong>Kleur van de Chatbot</strong></div>
    <div class="card-body">
        <!-- Instructie voor gebruiker -->
        <p style="font-size: 0.9em;">Klik op het vierkantje hieronder om een kleur te kiezen en klik daarna op "Save".</p>
        
        <!-- Dit wordt uw kleurkiezer-knop -->
        <button id="color-picker-button" class="btn btn-primary">Kies kleur</button>
        
        <!-- Verborgen veld om de geselecteerde kleur op te slaan voor form submission (indien nodig) -->
        <input type="hidden" id="new-color" name="new-color">
    </div>
</div>
  


  <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr@1.8.1/dist/pickr.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script>
$(document).ready(function() {
    // Toggle en sluit sidebar
    $('#toggleSidebar').on('click', function () {
        $('#sidebarMenu').toggleClass('show');
    });
    $('#closeSidebar').on('click', function () {
        $('#sidebarMenu').removeClass('show');
    });

    // Functie om berichten bij te werken
    function updateMessage(type, inputId, url) {
        const newValue = $(`#${inputId}`).val();
        $.ajax({
            url: url,
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ message: newValue }),
            success: function() {
                alert(`${type} message updated successfully!`);
                location.reload();
            },
            error: function() {
                alert(`Failed to update ${type.toLowerCase()} message.`);
            }
        });
    }

    // Event listeners voor berichten
    $("#update-form-welcome").submit(function(e) {
        e.preventDefault();
        updateMessage("Welcome", "new-message", '/update_welcome_message');
    });
    $("#update-form-title").submit(function(e) {
        e.preventDefault();
        updateMessage("Title", "new-title", '/update_title_message');
    });

    let pickr = Pickr.create({
    el: '#color-picker-button',
    theme: 'classic',
    default: '#42445a',
    components: {
        preview: true,
        opacity: false,
        hue: true,
        interaction: {
            hex: true,
            rgba: false,
            hsla: false,
            hsva: false,
            cmyk: false,
            input: true,
            clear: false,
            save: true
        }
    },
    strings: {
        save: 'Opslaan',  // Verander 'save' naar 'Opslaan'
    }
});



    // Pickr event listener voor kleurselectie
    pickr.on('save', (color) => {
        const newColor = color.toHEXA().toString();
        $("#new-color").val(newColor); // Zet de geselecteerde kleur in het verborgen veld
        $.ajax({
            url: '/update_color',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ color: newColor }),
            success: function() {
                alert("Header color updated successfully!");
                location.reload();
            },
            error: function() {
                alert("Failed to update header color.");
            }
        });
        pickr.hide();
    });

    // Functie voor het bijwerken van de kleur via de 'Bijwerken' knop
    $("#update-form-color").submit(function(e) {
        e.preventDefault();
        const newColor = $("#new-color").val();
        $.ajax({
            url: '/update_color',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ color: newColor }),
            success: function() {
                alert("Header color updated successfully!");
                location.reload();
            },
            error: function() {
                alert("Failed to update header color.");
            }
        });
    });
});


  </script>
  
</body>
</html>

